<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title> OHDSI GIS WG</title>

<script src="site_libs/header-attrs-2.30/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cosmo.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.13.2/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-6.5.2/css/all.min.css" rel="stylesheet" />
<link href="site_libs/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet" />
<link rel='shortcut icon' type='image/x-icon' href='favicon.ico' />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>






<link rel="stylesheet" href="style.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html"><div><img src="ohdsi16x16.png"></img> OHDSI GIS </div></a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">
    <span class="fa fa-home"></span>
     
    Home
  </a>
</li>
<li>
  <a href="get-started.html">
    <span class="fa fa-play"></span>
     
    Get Started
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    <span class="fa fa-earth"></span>
     
    Gaia
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="gaia-intro.html">Overview</a>
    </li>
    <li>
      <a href="gaia-principles.html">Design</a>
    </li>
    <li>
      <a href="schema-extensions.html">Schema Extensions</a>
    </li>
    <li>
      <a href="use-cases.html">Use Cases</a>
    </li>
    <li>
      <a href="analysis.html">Analysis</a>
    </li>
    <li>
      <a href="gaiaDB.html">gaiaDB</a>
    </li>
    <li>
      <a href="gaiaCore.html">gaiaCore</a>
    </li>
    <li>
      <a href="gaiaCatalog.html">gaiaCatalog</a>
    </li>
    <li>
      <a href="gaiaDocker.html">gaiaDocker</a>
    </li>
  </ul>
</li>
<li>
  <a href="vocabulary.html">
    <span class="fa fa-book"></span>
     
    Vocabulary
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    <span class="fa fa-code"></span>
     
    Developer
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="developer.html">Overview</a>
    </li>
    <li>
      <a href="developer-packages.html">Package Status</a>
    </li>
    <li>
      <a href="developer-contributing.html">Contributing</a>
    </li>
    <li>
      <a href="developer-architecture.html">Architecture</a>
    </li>
    <li>
      <a href="developer-deployment.html">Deployment</a>
    </li>
  </ul>
</li>
<li>
  <a href="project-management.html">
    <span class="fa fa-tasks"></span>
     
    Project Management
  </a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/OHDSI/GIS">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore"><img src="ohdsi40x40.png"></img> OHDSI GIS
WG</h1>

</div>


<style type="text/css">
script src = "https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"
</style>
<script>
 $(document).ready(function() {
    $('body').prepend('<div class=\"zoomDiv\"><img src=\"\" class=\"zoomImg\"></div>');
    // onClick function for all plots (img's)
    $('img:not(.zoomImg)').click(function() {
      $('.zoomImg').attr('src', $(this).attr('src')).css({width: '100%'});
      $('.zoomDiv').css({opacity: '1', width: 'auto', border: '1px solid white', borderRadius: '5px', position: 'fixed', top: '50%', left: '50%', marginRight: '-50%', transform: 'translate(-50%, -50%)', boxShadow: '0px 0px 50px #888888', zIndex: '50', overflow: 'auto', maxHeight: '100%'});
    });
    // onClick function for zoomImg
    $('img.zoomImg').click(function() {
      $('.zoomDiv').css({opacity: '0', width: '0%'}); 
    });
  });
</script>
<div id="omop-gis-schema-extensions" class="section level1">
<h1><strong>OMOP GIS Schema Extensions</strong></h1>
<p><img src="images/cdm_extension_erd.png" style="width:150.0%"
alt="OMOP GIS Schema Extensions - Click here to download" /> <br></p>
<div id="overview" class="section level2">
<h2><strong>Overview</strong></h2>
<p>The OMOP GIS Vocabulary Package extends the OMOP Common Data Model
(CDM) to support geospatially-linked health determinants and
environmental exposures. This extension is anchored by the
<strong>external_exposure</strong> table, which serves as the
foundational structure enabling integration of spatial, environmental,
and sociodemographic data into observational health research
workflows.</p>
<p><br></p>
</div>
<div id="location_history" class="section level2 tabset tabset-pills">
<h2 class="tabset tabset-pills">location_history</h2>
<p>Access DDL scripts <a
href="https://github.com/OHDSI/GIS/tree/main/inst/ddl/">here</a></p>
<p><strong>Table Description</strong></p>
<p>This table is a copy of the OMOP Location_History table.</p>
<p><strong>User Guide</strong></p>
<p>Copy the OMOP Location_History table to Gaia to facilitate creation
of CDM Extension tables</p>
<p><strong>ETL Conventions</strong></p>
<p>This table should be an exact duplicate of the OMOP Location_History
table.</p>
<table class="table table-condensed table-hover" style="font-size: 13px; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
Gaia Field
</th>
<th style="text-align:left;">
User Guide
</th>
<th style="text-align:left;">
ETL Conventions
</th>
<th style="text-align:left;">
Datatype
</th>
<th style="text-align:left;">
Required
</th>
<th style="text-align:left;">
Primary Key
</th>
<th style="text-align:left;">
Foreign Key
</th>
<th style="text-align:left;">
FK Table
</th>
<th style="text-align:left;">
FK Domain
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;font-weight: bold;">
location_id
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
integer
</td>
<td style="text-align:left;">
Yes
</td>
<td style="text-align:left;">
No
</td>
<td style="text-align:left;">
Yes
</td>
<td style="text-align:left;">
location
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
relationship_type_concept_id
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
integer
</td>
<td style="text-align:left;">
Yes
</td>
<td style="text-align:left;">
No
</td>
<td style="text-align:left;">
Yes
</td>
<td style="text-align:left;">
concept
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
domain_id
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
integer
</td>
<td style="text-align:left;">
Yes
</td>
<td style="text-align:left;">
No
</td>
<td style="text-align:left;">
No
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
entity_id
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
integer
</td>
<td style="text-align:left;">
Yes
</td>
<td style="text-align:left;">
No
</td>
<td style="text-align:left;">
No
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
start_date
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
date
</td>
<td style="text-align:left;">
Yes
</td>
<td style="text-align:left;">
No
</td>
<td style="text-align:left;">
No
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
end_date
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
date
</td>
<td style="text-align:left;">
No
</td>
<td style="text-align:left;">
No
</td>
<td style="text-align:left;">
No
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
</tr>
</tbody>
</table>
</div>
<div id="external_exposure" class="section level2 tabset tabset-pills">
<h2 class="tabset tabset-pills">external_exposure</h2>
<p>Access DDL scripts <a
href="https://github.com/OHDSI/GIS/tree/main/inst/ddl/">here</a></p>
<p><strong>Table Description</strong></p>
<p>This CDM Extension table is used to represent person-related
transformations of data from Gaia and to interface with ATLAS and OHDSI
tool stack from an OMOP CDM database.</p>
<table class="table table-condensed table-hover" style="font-size: 13px; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
Gaia Field
</th>
<th style="text-align:left;">
User Guide
</th>
<th style="text-align:left;">
ETL Conventions
</th>
<th style="text-align:left;">
Datatype
</th>
<th style="text-align:left;">
Required
</th>
<th style="text-align:left;">
Primary Key
</th>
<th style="text-align:left;">
Foreign Key
</th>
<th style="text-align:left;">
FK Table
</th>
<th style="text-align:left;">
FK Domain
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;font-weight: bold;">
external_exposure_id
</td>
<td style="text-align:left;">
The unique key given to a social or environmental exposure for a Person
</td>
<td style="text-align:left;">
Each derived instance of an exposure should be assigned this unique key.
</td>
<td style="text-align:left;">
integer
</td>
<td style="text-align:left;">
Yes
</td>
<td style="text-align:left;">
Yes
</td>
<td style="text-align:left;">
No
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
location_id
</td>
<td style="text-align:left;">
The LOCATION_ID of the Person for whom the exposure is associated.
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
integer
</td>
<td style="text-align:left;">
Yes
</td>
<td style="text-align:left;">
No
</td>
<td style="text-align:left;">
Yes
</td>
<td style="text-align:left;">
location
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
person_id
</td>
<td style="text-align:left;">
The PERSON_ID of the Person for whom the exposure is associated.
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
integer
</td>
<td style="text-align:left;">
Yes
</td>
<td style="text-align:left;">
No
</td>
<td style="text-align:left;">
Yes
</td>
<td style="text-align:left;">
person
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
exposure_concept_id
</td>
<td style="text-align:left;">
The EXPOSURE_CONCEPT_ID field is recommended for primary use in
analyses, and must be used for network studies. This is the standard
concept mapped from the source value which represents a exposure.
</td>
<td style="text-align:left;">
The CONCEPT_ID to which the source exposure is mapped. This mapping
should be integrated into the variable_source record and automatically
populated in this record.
</td>
<td style="text-align:left;">
integer
</td>
<td style="text-align:left;">
Yes
</td>
<td style="text-align:left;">
No
</td>
<td style="text-align:left;">
Yes
</td>
<td style="text-align:left;">
concept
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
exposure_start_date
</td>
<td style="text-align:left;">
Use this date to determine the start date of the exposure.
</td>
<td style="text-align:left;">
The date range of the exposure should represent the temporal overlap
between the place-based exposure data point and the LOCATION_ID’s
location_history record.
</td>
<td style="text-align:left;">
date
</td>
<td style="text-align:left;">
Yes
</td>
<td style="text-align:left;">
No
</td>
<td style="text-align:left;">
No
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
exposure_start_datetime
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
datetime
</td>
<td style="text-align:left;">
No
</td>
<td style="text-align:left;">
No
</td>
<td style="text-align:left;">
No
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
exposure_end_date
</td>
<td style="text-align:left;">
Use this date to determine the end date of the exposure.
</td>
<td style="text-align:left;">
The date range of the exposure should represent the temporal overlap
between the place-based exposure data point and the LOCATION_ID’s
location_history record.
</td>
<td style="text-align:left;">
date
</td>
<td style="text-align:left;">
Yes
</td>
<td style="text-align:left;">
No
</td>
<td style="text-align:left;">
No
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
exposure_end_datetime
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
datetime
</td>
<td style="text-align:left;">
No
</td>
<td style="text-align:left;">
No
</td>
<td style="text-align:left;">
No
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
exposure_type_concept_id
</td>
<td style="text-align:left;">
This field identifies the origin of the exposure record (e.g. Census,
EHR, Environmental data, Geospatial data, Satellite imagery, GIS
mapping, Sensor network, Mobile device geolocation, LiDAR)
</td>
<td style="text-align:left;">
The CONCEPT_ID to which the exposure’s data source type is mapped. This
mapping should be integrated into the data_source record and
automatically populated in this record.
</td>
<td style="text-align:left;">
integer
</td>
<td style="text-align:left;">
Yes
</td>
<td style="text-align:left;">
No
</td>
<td style="text-align:left;">
Yes
</td>
<td style="text-align:left;">
concept
</td>
<td style="text-align:left;">
Type Concept
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
exposure_relationship_concept_id
</td>
<td style="text-align:left;">
This field can be used to determine the spatiotemporal relationship
between the source Exposure and the Person
</td>
<td style="text-align:left;">
The CONCEPT_ID to which the relationship between the Exposure and the
Person is mapped. This mapping should be automatically populated in this
record.
</td>
<td style="text-align:left;">
integer
</td>
<td style="text-align:left;">
Yes
</td>
<td style="text-align:left;">
No
</td>
<td style="text-align:left;">
Yes
</td>
<td style="text-align:left;">
concept
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
exposure_source_concept_id
</td>
<td style="text-align:left;">
This field can be used to determine the original source of place-based
exposure data
</td>
<td style="text-align:left;">
The CONCEPT_ID to which the exposure’s data source is mapped. This
mapping should be integrated into the data_source record and
automatically populated in this record.
</td>
<td style="text-align:left;">
integer
</td>
<td style="text-align:left;">
No
</td>
<td style="text-align:left;">
No
</td>
<td style="text-align:left;">
Yes
</td>
<td style="text-align:left;">
concept
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
exposure_source_value
</td>
<td style="text-align:left;">
This field houses the verbatim name of the original source of
place-based exposure data.
</td>
<td style="text-align:left;">
This name is mapped to a Standard Exposure Source Concept and the
original name is stored here for reference.
</td>
<td style="text-align:left;">
varchar(50)
</td>
<td style="text-align:left;">
No
</td>
<td style="text-align:left;">
No
</td>
<td style="text-align:left;">
No
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
exposure_relationship_source_value
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
varchar(50)
</td>
<td style="text-align:left;">
No
</td>
<td style="text-align:left;">
No
</td>
<td style="text-align:left;">
No
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
dose_unit_source_value
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
varchar(50)
</td>
<td style="text-align:left;">
No
</td>
<td style="text-align:left;">
No
</td>
<td style="text-align:left;">
No
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
quantity
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
integer
</td>
<td style="text-align:left;">
No
</td>
<td style="text-align:left;">
No
</td>
<td style="text-align:left;">
No
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
modifier_source_value
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
varchar(50)
</td>
<td style="text-align:left;">
No
</td>
<td style="text-align:left;">
No
</td>
<td style="text-align:left;">
No
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
operator_concept_id
</td>
<td style="text-align:left;">
The meaning of Concept?4172703?for ?=? is identical to omission of a
OPERATOR_CONCEPT_ID value. Since the use of this field is rare, it?s
important when devising analyses to not to forget testing for the
content of this field for values different from =.
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
integer
</td>
<td style="text-align:left;">
No
</td>
<td style="text-align:left;">
No
</td>
<td style="text-align:left;">
Yes
</td>
<td style="text-align:left;">
concept
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
value_as_number
</td>
<td style="text-align:left;">
This is the numerical value of the Exposure, if available.
</td>
<td style="text-align:left;">
This value should be integrated into the variable_source record and
automatically populated in this record.
</td>
<td style="text-align:left;">
float
</td>
<td style="text-align:left;">
No
</td>
<td style="text-align:left;">
No
</td>
<td style="text-align:left;">
No
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
value_as_concept_id
</td>
<td style="text-align:left;">
If the raw data gives a categorial result for exposures those values are
captured and mapped to standard concepts in the ?Exposure Value? domain.
</td>
<td style="text-align:left;">
This mapping should be integrated into the variable_source record and
automatically populated in this record.
</td>
<td style="text-align:left;">
integer
</td>
<td style="text-align:left;">
No
</td>
<td style="text-align:left;">
No
</td>
<td style="text-align:left;">
Yes
</td>
<td style="text-align:left;">
concept
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
unit_concept_id
</td>
<td style="text-align:left;">
UNIT_SOURCE_VALUES should be mapped to a Standard Concept in the Unit
domain that best represents the unit as given in the source data.
</td>
<td style="text-align:left;">
This mapping should be integrated into the variable_source record and
automatically populated in this record.
</td>
<td style="text-align:left;">
integer
</td>
<td style="text-align:left;">
No
</td>
<td style="text-align:left;">
No
</td>
<td style="text-align:left;">
Yes
</td>
<td style="text-align:left;">
concept
</td>
<td style="text-align:left;">
Unit
</td>
</tr>
</tbody>
</table>
<p><br></p>
<p>The OMOP GIS Vocabulary Package extends the OMOP Common Data Model
(CDM) to support geospatially-linked health determinants and
environmental exposures. This extension is anchored by the
<strong>external_exposure</strong> table, which serves as the
foundational structure enabling integration of spatial, environmental,
and sociodemographic data into observational health research
workflows.</p>
<hr />
</div>
<div id="the-external_exposure-table" class="section level2">
<h2>6.1. The external_exposure Table</h2>
<p>The <code>external_exposure</code> table is the central data
structure that connects patient-level health data to environmental,
geographic, and social determinants captured through the GIS vocabulary.
All other components of the GIS extension—vocabularies, mappings,
hierarchies, and relationships—depend on this table’s definition and
implementation.</p>
<div id="purpose-and-scope" class="section level3">
<h3>6.1.1. Purpose and Scope</h3>
<p>The <code>external_exposure</code> table enables:</p>
<ul>
<li><strong>Linkage of environmental exposures to persons</strong> via
standardized location identifiers</li>
<li><strong>Temporal alignment</strong> of exposure periods with
clinical observation periods</li>
<li><strong>Standardized representation</strong> of exposure types,
intensities, and measurement units</li>
<li><strong>Integration with OMOP analytic tools</strong> for cohort
construction and outcome assessment</li>
<li><strong>Support for multi-domain exposures</strong> including air
quality, noise pollution, socioeconomic indices, and built environment
characteristics</li>
</ul>
</div>
<div id="current-definition" class="section level3">
<h3>6.1.2. Current Definition</h3>
<p>The foundational schema for <code>external_exposure</code> has been
developed through collaboration within the GIS Working Group. This
initial definition represents the <strong>first OMOP CDM MVP</strong>
for geospatial health determinants.</p>
<p><strong>Key Fields:</strong></p>
<table>
<colgroup>
<col width="37%" />
<col width="23%" />
<col width="39%" />
</colgroup>
<thead>
<tr class="header">
<th><strong>Field Name</strong></th>
<th><strong>Type</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>exposure_occurrence_id</code></td>
<td>Integer</td>
<td>Unique identifier for each exposure record</td>
</tr>
<tr class="even">
<td><code>person_id</code></td>
<td>Integer</td>
<td>Foreign key to PERSON table</td>
</tr>
<tr class="odd">
<td><code>location_id</code></td>
<td>Integer</td>
<td>Foreign key to LOCATION table, indicating where exposure
occurred</td>
</tr>
<tr class="even">
<td><code>exposure_concept_id</code></td>
<td>Integer</td>
<td>Standard concept representing the type of exposure (from GIS
vocabularies)</td>
</tr>
<tr class="odd">
<td><code>exposure_start_date</code></td>
<td>Date</td>
<td>Date when the exposure event started</td>
</tr>
<tr class="even">
<td><code>exposure_end_date</code></td>
<td>Date</td>
<td>Date when the exposure event ended (NULL if ongoing)</td>
</tr>
<tr class="odd">
<td><code>exposure_type_concept_id</code></td>
<td>Integer</td>
<td>Concept defining the origin of the exposure record</td>
</tr>
<tr class="even">
<td><code>value_as_number</code></td>
<td>Float</td>
<td>Numerical value of the exposure (e.g., concentration, index
score)</td>
</tr>
<tr class="odd">
<td><code>value_as_concept_id</code></td>
<td>Integer</td>
<td>Concept for categorical exposure values</td>
</tr>
<tr class="even">
<td><code>unit_concept_id</code></td>
<td>Integer</td>
<td>Concept representing the measurement unit</td>
</tr>
<tr class="odd">
<td><code>operator_concept_id</code></td>
<td>Integer</td>
<td>Concept defining operator logic (e.g., &lt;, &gt;, =)</td>
</tr>
<tr class="even">
<td><code>quantity</code></td>
<td>Integer</td>
<td>Number of exposure occurrences (if applicable)</td>
</tr>
<tr class="odd">
<td><code>exposure_source_value</code></td>
<td>String</td>
<td>Raw exposure value from source data</td>
</tr>
<tr class="even">
<td><code>exposure_source_concept_id</code></td>
<td>Integer</td>
<td>Source-specific concept before standardization</td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>Note:</strong> This schema is subject to refinement through
community feedback and use case validation. Implementers should consult
the latest <a href="https://ohdsi.github.io/CommonDataModel/">OMOP CDM
specifications</a> and GIS Working Group discussions.</p>
</blockquote>
</div>
<div id="design-principles" class="section level3">
<h3>6.1.3. Design Principles</h3>
<p>The <code>external_exposure</code> table design prioritizes:</p>
<ol style="list-style-type: decimal">
<li><strong>CDM Conformance</strong>: Aligns with OMOP architectural
patterns and naming conventions</li>
<li><strong>Semantic Precision</strong>: Uses standardized concept IDs
from GIS vocabularies to ensure interoperability</li>
<li><strong>Temporal Granularity</strong>: Supports both point-in-time
and interval-based exposure assessments</li>
<li><strong>Spatial Linkage</strong>: Leverages LOCATION table to enable
geographic joins and spatial analyses</li>
<li><strong>Extensibility</strong>: Accommodates diverse exposure types
without requiring schema modifications</li>
</ol>
<hr />
</div>
</div>
<div id="auxiliary-tables-and-extensions" class="section level2">
<h2>6.2. Auxiliary Tables and Extensions</h2>
<p>While the initial <code>external_exposure</code> definition provides
a foundational structure, <strong>auxiliary tables</strong> may be
developed to support specific analytical needs and temporal modeling
requirements.</p>
<div id="proposed-auxiliary-structures" class="section level3">
<h3>6.2.1. Proposed Auxiliary Structures</h3>
<p>Future CDM extensions may include:</p>
<ul>
<li><strong>exposure_time_series</strong>: Captures temporally-ordered
exposure sequences for longitudinal analysis</li>
<li><strong>exposure_aggregation</strong>: Stores pre-computed exposure
summaries at various spatial and temporal granularities</li>
<li><strong>location_exposure_profile</strong>: Links locations to
characteristic exposure patterns and risk indices</li>
<li><strong>exposure_co_occurrence</strong>: Tracks concurrent exposures
to multiple environmental factors</li>
</ul>
</div>
<div id="use-case-driven-development" class="section level3">
<h3>6.2.2. Use Case-Driven Development</h3>
<p>The development of auxiliary tables will be guided by specific
research use cases, ensuring that extensions address real-world
analytical requirements rather than speculative needs. Each proposed
auxiliary table should:</p>
<ul>
<li><strong>Reference a validated use case</strong> from the Use Cases
Inventory (Section 7)</li>
<li><strong>Demonstrate analytical necessity</strong> beyond what
<code>external_exposure</code> can support</li>
<li><strong>Maintain CDM conformance</strong> and avoid duplication of
existing OMOP structures</li>
<li><strong>Include example implementations</strong> with sample data
and ETL logic</li>
</ul>
<hr />
</div>
</div>
<div id="mvp-roadmap" class="section level2">
<h2>6.3. MVP Roadmap</h2>
<p>The OMOP GIS CDM extension follows a Minimum Viable Product (MVP)
approach, enabling iterative development aligned with community needs
and validation outcomes.</p>
<div id="mvp-1-core-external_exposure-table" class="section level3">
<h3>6.3.1. MVP 1: Core external_exposure Table</h3>
<p><strong>Status:</strong> Initial definition complete
<strong>Scope:</strong> Basic exposure linkage with person, location,
and temporal attributes <strong>Validation:</strong> Section 5
(Validation) describes usability testing with real-world datasets
<strong>Next Steps:</strong> Community review, pilot implementations,
refinement based on feedback</p>
</div>
<div id="future-mvps" class="section level3">
<h3>6.3.2. Future MVPs</h3>
<p>Subsequent MVPs will be <strong>use case-driven</strong>, with each
iteration addressing specific analytical requirements identified by GIS
Working Group members and broader OHDSI community stakeholders.</p>
<p><strong>Potential Future MVPs:</strong></p>
<ul>
<li><strong>MVP 2</strong>: Time-series exposure modeling (supporting
longitudinal environmental epidemiology)</li>
<li><strong>MVP 3</strong>: Multi-level spatial aggregation (supporting
neighborhood-level and regional analyses)</li>
<li><strong>MVP 4</strong>: Co-exposure network modeling (supporting
exposome research)</li>
<li><strong>MVP 5</strong>: Historical exposure reconstruction
(supporting life-course epidemiology)</li>
</ul>
<p>Each MVP will be documented with: - <strong>Motivating use
case(s)</strong> - <strong>Schema definitions</strong> (DDL and data
dictionary) - <strong>Example ETL workflows</strong> -
<strong>Validation criteria</strong> and test datasets -
<strong>Integration guidance</strong> for existing OMOP
implementations</p>
<hr />
</div>
</div>
<div id="relationship-to-gis-vocabularies" class="section level2">
<h2>6.4. Relationship to GIS Vocabularies</h2>
<p>All CDM extensions depend on the GIS Vocabulary Package to ensure
semantic standardization:</p>
<ul>
<li><strong>exposure_concept_id</strong> values come from OMOP GIS, OMOP
SDOH, and OMOP Exposome vocabularies</li>
<li><strong>Hierarchical relationships</strong> enable aggregation
across exposure categories (e.g., all air quality metrics)</li>
<li><strong>Mapping relationships</strong> connect source-specific
exposure codes to OMOP standard concepts</li>
<li><strong>Custom relationships</strong> (e.g., “Has geometry”,
“Locates in tissue”) support domain-specific reasoning</li>
</ul>
<p>This bidirectional dependency ensures that: - Vocabulary development
is informed by practical CDM implementation needs - CDM schema evolution
drives vocabulary enrichment and refinement - Use cases validate both
vocabulary coverage and table design adequacy</p>
<hr />
</div>
<div id="implementation-considerations" class="section level2">
<h2>6.5. Implementation Considerations</h2>
<div id="spatial-identifier-management" class="section level3">
<h3>6.5.1. Spatial Identifier Management</h3>
<p>Effective use of <code>external_exposure</code> requires: -
<strong>Consistent location coding</strong> using standardized
identifiers (GEOID, ZIP, lat/lon) - <strong>Geocoding workflows</strong>
to assign location_id values to persons - <strong>Temporal location
tracking</strong> if persons move between observation periods</p>
</div>
<div id="data-integration-patterns" class="section level3">
<h3>6.5.2. Data Integration Patterns</h3>
<p>Common ETL patterns include: - <strong>Batch loading</strong> of
exposure datasets (e.g., annual EPA air quality data) - <strong>Spatial
joins</strong> between person locations and environmental monitoring
data - <strong>Temporal interpolation</strong> when exposure
measurements are sparse or interval-based</p>
</div>
<div id="performance-optimization" class="section level3">
<h3>6.5.3. Performance Optimization</h3>
<p>For large-scale implementations: - <strong>Index location_id and
exposure_start_date</strong> for efficient temporal queries -
<strong>Partition by year or region</strong> to improve query
performance - <strong>Pre-aggregate</strong> common exposure metrics to
reduce computational overhead</p>
<hr />
</div>
</div>
<div id="governance-and-versioning" class="section level2">
<h2>6.6. Governance and Versioning</h2>
<p>CDM extensions are managed through OHDSI governance processes:</p>
<ul>
<li><strong>Proposals</strong> are submitted to the GIS Working Group
for review</li>
<li><strong>Community feedback</strong> is collected through GitHub
discussions and WG meetings</li>
<li><strong>Validation</strong> is conducted through pilot
implementations and use case testing</li>
<li><strong>Versioning</strong> follows OMOP CDM release cycles (e.g.,
CDM v6.1 + GIS Extension v1.0)</li>
</ul>
<p>For the latest schema definitions, implementation guidance, and
community discussions, see: - <a
href="https://ohdsi.github.io/GIS/">OHDSI GIS Working Group</a> - <a
href="https://github.com/OHDSI/CommonDataModel">OMOP CDM GitHub</a> - <a
href="https://github.com/TuftsCTSI/CVB/tree/main/GIS/Ontology">GIS
Vocabulary Package</a></p>
</div>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
